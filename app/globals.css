@import "tailwindcss";
/* Tailwind Typography plugin configured via tailwind.config.ts */
/* Theme tokens (moved from @theme to :root to avoid unknown at-rule warnings) */
:root {
  color-scheme: dark;
  --color-background: #000000;
  --color-foreground: #ffffff;
  --color-muted: #101010;
  --color-subtle: #1a1a1a;
  --color-line: #2a2a2a;
  --font-articulat: "articulat-cf", system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  --ease-premium: cubic-bezier(0.2, 0.8, 0.2, 1);
  --easing-ui: cubic-bezier(0.22, 1, 0.36, 1);
  --duration-fast: 180ms;
  --duration-normal: 420ms;
  --duration-slow: 900ms;
  /* Motion tokens aligned with Framer Motion defaults (emphasis curve) */
  --ease-motion: cubic-bezier(0.16, 1, 0.3, 1);
  --duration-motion: 480ms; /* matches motionDur.lg (0.48s) */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --surface-border: rgba(255,255,255,0.20);
  --surface-border-strong: rgba(255,255,255,0.30);
  --shadow-sm: 0 8px 20px rgba(0,0,0,0.35);
  --shadow-md: 0 18px 50px rgba(0,0,0,0.40);
  --shadow-lg: 0 28px 70px rgba(0,0,0,0.45);
  --container-max: 80rem; /* ~1280px */
  --container-max-wide: 96rem; /* ~1536px */
  /* Container side padding clamp to mirror reference spacing */
  --container-pad: clamp(1rem, 4vw, 2rem);
  /* Grid gutters tuned to Rise-like rhythm (approx 24 → 80px) */
  --grid-gutter: 1.5rem;    /* ~24px base */
  /* Fluid type tokens (Utopia-inspired) */
  --vw-min: 360; /* px */
  --vw-max: 1440; /* px */
  --step-0-min: 16;  --step-0-max: 18;   /* body */
  --step-2-min: 24;  --step-2-max: 32;   /* h4 */
  --step-3-min: 28;  --step-3-max: 40;   /* h3 */
  --step-4-min: 36;  --step-4-max: 56;   /* h2 */
  --step-5-min: 48;  --step-5-max: 80;   /* h1 */
  --fluid: calc((100vw - var(--vw-min)*1px)/(var(--vw-max) - var(--vw-min)));
}

/*
  Layout Contract (macro → micro)
  - App shell: body uses CSS Grid rows [auto, 1fr, auto].
  - Each major region (header/main/footer) sits inside wrappers that occupy those rows.
  - Content blocks: grid-shell → container-row/container-wide → grid-12 + gutter.
  - Spacing: prefer logical properties (padding-inline, margin-block) and stack utilities.
*/

/* Widen gutters and container padding progressively to reflect reference site */
@media (min-width: 640px) {
  :root {
    --grid-gutter: 2rem;       /* ~32px */
    --container-pad: clamp(1rem, 4.5vw, 2.25rem);
  }
}
@media (min-width: 768px) {
  :root {
    --grid-gutter: 2.5rem;     /* ~40px */
    --container-pad: clamp(1rem, 5vw, 2.5rem);
  }
}
@media (min-width: 1024px) {
  :root {
    --grid-gutter: 3rem;       /* ~48px */
    --container-pad: clamp(1rem, 5vw, 3rem);
  }
}
@media (min-width: 1280px) {
  :root {
    --grid-gutter: 4rem;       /* ~64px */
    --container-pad: clamp(1rem, 5.5vw, 3.5rem);
  }
}
@media (min-width: 1536px) {
  :root {
    --grid-gutter: 5rem;       /* ~80px */
    --container-pad: clamp(1rem, 6vw, 4rem);
  }
}

/* Ensure predictable sizing across the app */
*, *::before, *::after { box-sizing: border-box; }

@keyframes wipe {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(0); }
}


html, body { 
  background-color: black; 
  color: white; 
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* Prevent horizontal scroll at the root without clipping fixed descendants attached to body */
/* Avoid forcing a permanent gutter; rely on element-level fixes instead */
/* Reserve gutter space to avoid 100vw including the scrollbar width on platforms that show it */
/* Robust text wrapping to avoid forcing inline overflow */
:where(p, h1, h2, h3, h4, h5, h6, li, blockquote, a, code, figcaption) { overflow-wrap: anywhere; word-break: break-word; max-inline-size: 100%; }
pre { overflow-x: auto; }

/* Prevent overflow in common flex patterns */
:where(.flex, .inline-flex, .grid) { min-width: 0; }
:where(.flex > *, .inline-flex > *, .grid > *) { min-width: 0; max-width: 100%; }

/* Hide the system cursor only when overlay gate enables it */
body.cursor-hidden { cursor: none; }

h1, h2 { text-transform: uppercase; }
h1 { letter-spacing: 0.08em; line-height: 1.14; }
h2 { letter-spacing: 0.06em; line-height: 1.18; }

/* Native cursor is hidden via inline style on <body> in layout.tsx to avoid !important warnings */

/* Articulat CF will come from Adobe Fonts link in _document. */
body { font-family: articulat-cf, system-ui, -apple-system, Segoe UI, Helvetica Neue, Arial, sans-serif; }

/* Always use default arrow cursor for interactive elements (no hand pointer) */
:where(a, button, [role="button"], summary) { cursor: default; }
/* During wipes, hide cursor everywhere */
body.cursor-hidden, body.cursor-hidden * { cursor: none; }
/* Separate class used only during page wipe so we don't fight CursorTrailGate */
body.cursor-hide-transition, body.cursor-hide-transition * { cursor: none; }

/* Custom cursor dot with inversion core (Chronicle-inspired but subtle) */
.cursor-dot { width: 14px; height: 14px; margin-left: -7px; margin-top: -7px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.6); transition: opacity 120ms ease; will-change: transform; }
.cursor-dot .cursor-core { width: 100%; height: 100%; border-radius: inherit; background: #fff; mix-blend-mode: difference; opacity: 0; transition: opacity 140ms ease; }
.cursor-dot.is-invert .cursor-core { opacity: 0.9; }

/* Uppercase utilities */
.uc { text-transform: uppercase; }
.no-uc { text-transform: none; }

/* Screen reader-only utility (in case Tailwind's sr-only isn't available) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Hover wipe utility (inverse colour wipe) */
.wipe-link {
  position: relative;
  display: inline-block;
  overflow: hidden;
  isolation: isolate;
}
.wipe-link::before {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: white;
  opacity: 0.08;
  z-index: -1;
  transition: transform 700ms var(--ease-premium);
}
.wipe-link:hover::before, .wipe-link:focus-visible::before {
  transform: translateX(0);
}

/* Link and button microinteractions */
/* Avoid layout-shifting hover effects; keep transitions to color/opacity only */
a, button {
  transition: color 600ms var(--ease-premium), opacity 600ms var(--ease-premium);
}
/* Remove active scaling to prevent text shift: no extra rule needed */

/* Underline slide-in hover effect (white on dark) */
/* Opt-in via .link-underline to avoid unintended usage (e.g., modals) */
.link-underline {
  text-decoration: none;
  background-image: linear-gradient(currentColor, currentColor);
  background-size: 0% 2px; /* underline thickness */
  background-position: 0 100%;
  background-repeat: no-repeat;
  transition: background-size 700ms var(--ease-premium), color 420ms var(--ease-premium), opacity 420ms var(--ease-premium);
}

/* Title-like small headings */
.text-xl.uc { letter-spacing: 0.06em; }
.link-underline:hover,
.link-underline:focus-visible {
  background-size: 100% 2px;
  color: #fff; /* ensure white on hover */
}

/* Persistent underline for active links */
.link-underline.is-active {
  background-size: 100% 2px;
}

@media (prefers-reduced-motion) {
  a, button, .link-underline {
    transition-duration: 0.01ms;
  }
}

/* Sheen (shine) sweep for interactive elements */
@layer utilities {
  .sheen { position: relative; overflow: hidden; isolation: isolate; }
  .sheen::after {
    content: "";
    position: absolute; inset: -20%;
    background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,.35) 50%, transparent 70%);
    transform: translateX(-120%) rotate(0.001deg);
    transition: transform 600ms cubic-bezier(.16,1,.3,1);
    pointer-events: none;
    mix-blend-mode: screen;
    will-change: transform;
  }
  .sheen:hover::after,
  .sheen:focus-visible::after { transform: translateX(120%); }
}

@media (prefers-reduced-motion: reduce) {
  .sheen::after { transition: none; transform: translateX(0); }
}

/* Cursor will be hidden globally via body.cursor-hidden; don't force-hide on all interactive elements */

/* Accessible focus-visible ring */
*:focus-visible { outline: 2px solid rgba(255,255,255,0.9); outline-offset: 3px; }
/* Ensure focused anchors aren't obscured under sticky headers */
*:target { scroll-margin-top: 6rem; }

/* WCAG 2.2 touch target size safeguard */
button, [role="button"], input[type="checkbox"], input[type="radio"], a, summary {
  min-width: 24px;
  min-height: 24px;
}

.button-primary {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.25rem;
  /* Rectangular geometry to match Chronicle style */
  border-radius: 6px;
  border: 1px solid var(--surface-border);
  color: white;
  text-transform: uppercase;
  transition: color var(--duration-slow) var(--ease-premium), background-color var(--duration-slow) var(--ease-premium);
}
.button-primary:focus {
  outline: none;
}
.button-primary:hover {
  color: black;
  background-color: white;
}
.button-primary:active { box-shadow: inset 0 0 0 1px rgba(0,0,0,0.12); }
.button-primary:focus-visible { outline: 2px solid #fff; outline-offset: 2px; }

/* View Transitions (progressive enhancement): enable root name only to avoid lint on pseudo-elements */
html { view-transition-name: root; }
@keyframes vt-slide-in { from { transform: translateY(6px); opacity: .001 } to { transform:none; opacity:1 } }

/* Contour backdrop: container that hosts layered SVGs for parallax */
.contour-host {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  overflow: hidden;
  background: #000;
  contain: layout paint size;
}
[data-bg-fallback] { opacity: 1; transition: opacity 400ms var(--ease-premium); }
.bg-gl-ready [data-bg-fallback] { opacity: 0; transition: opacity 400ms var(--ease-premium); }
.contour-layer {
  position: absolute;
  inset: -10% -10% -10% -10%;
  opacity: 0.21;
  will-change: transform;
  contain: layout paint;
}
@media (prefers-reduced-motion) {
  .contour-layer { transform: none; }
}

/* Stacking utilities (align app-wide z-index usage) */
.z-bg { z-index: 0; }
.z-content { z-index: 10; }
.z-header { z-index: 90; }
.z-overlay { z-index: 100; }

/* Let header pass pointer events through except on interactive elements */
.header-interactive { pointer-events: none; }
.header-interactive :is(a, button, [role="button"], input, select, textarea, summary, [tabindex]) {
  pointer-events: auto;
}

/* Grid/container utilities (lightweight, non-intrusive) */
.grid-shell {
  width: 100%;
  margin-inline: 0;
}

.grid-12 { display: grid; grid-template-columns: 1fr; grid-auto-columns: minmax(0, 1fr); min-width: 0; }
.grid-12 > * { min-width: 0; max-width: 100%; }
/* On small screens, force each child to take the single column (win over any span utilities) */
@media (max-width: 767px) { .grid-12.grid-12 > * { grid-column: 1 / -1; } }
@media (min-width: 768px) {
  .grid-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
}

/* Apply standard gutters separately so pages can opt-in and not fight per-component gap utilities */
.gutter { gap: calc(var(--grid-gutter) / 1.5); }
@media (min-width: 768px) { .gutter { gap: var(--grid-gutter); } }

/* Simple column span helpers for common patterns (md+ only) */
@media (min-width: 768px) {
  .span-12 { grid-column: span 12 / span 12; }
  .span-8 { grid-column: span 8 / span 8; }
  .span-6 { grid-column: span 6 / span 6; }
  .span-4 { grid-column: span 4 / span 4; }
}

/* Content wrapper that sits inside grid-shell to provide consistent lateral rhythm */

/* Safe-area-aware containers so content never touches/crops at device edges */
.container-row {
  width: 100%;
  max-width: var(--container-max);
  /* Align to the same left grid edge as wide containers so header/hero/pages share a baseline */
  margin-inline-start: max(0px, calc((100% - var(--container-max-wide)) / 2));
  margin-inline-end: 0;
  /* Side padding aligned to token */
  padding-inline: var(--container-pad);
}
/* Let immediate children shrink instead of forcing overflow */
.container-row > * { min-width: 0; }
@supports (padding-left: max(0px, env(safe-area-inset-left))) {
  .container-row {
    padding-left: max(var(--container-pad), env(safe-area-inset-left));
    padding-right: max(var(--container-pad), env(safe-area-inset-right));
  }
}

/* Fluid container: full-viewport width with safe side padding (no max-width) */
.container-fluid {
  width: 100%;
  margin-inline: 0;
  padding-inline: var(--container-pad);
}
/* Let immediate children shrink */
.container-fluid > * { min-width: 0; }
@supports (padding-left: max(0px, env(safe-area-inset-left))) {
  .container-fluid {
    padding-left: max(var(--container-pad), env(safe-area-inset-left));
    padding-right: max(var(--container-pad), env(safe-area-inset-right));
  }
}

/* Wider max container for select pages/sections */
.container-wide {
  width: 100%;
  max-width: var(--container-max-wide);
  /* Align to left grid edge at wide viewports */
  margin-inline-start: max(0px, calc((100% - var(--container-max-wide)) / 2));
  margin-inline-end: 0;
  padding-inline: var(--container-pad);
}
/* Let immediate children shrink */
.container-wide > * { min-width: 0; }
@supports (padding-left: max(0px, env(safe-area-inset-left))) {
  .container-wide {
    padding-left: max(var(--container-pad), env(safe-area-inset-left));
    padding-right: max(var(--container-pad), env(safe-area-inset-right));
  }
}

/* Section bands: generous vertical rhythm consistent across pages */
/* Use :where() to keep specificity at 0 so utility classes (e.g., pt-28) can override */
:where(.section-band) { padding-block: 3rem; }
@media (min-width: 768px) { :where(.section-band) { padding-block: 4rem; } }
@media (min-width: 1024px) { :where(.section-band) { padding-block: 6rem; } }

/* Auto-fit grid helpers for cards/logos/posts (min track size customizable) */
.auto-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--auto-grid-min, 16rem), 1fr));
  gap: var(--auto-grid-gap, 1.5rem);
}
@media (min-width: 768px) { .auto-grid { gap: var(--auto-grid-gap-md, 2rem); } }
@media (min-width: 1280px) { .auto-grid { gap: var(--auto-grid-gap-lg, 2.5rem); } }

/* Full-bleed media helper: edge-to-edge without transform rounding or 100vw traps */
.full-bleed {
  inline-size: 100vw;
  margin-inline: calc(50% - 50vw);
  max-inline-size: 100vw;
}
@supports (width: 100svw) {
  .full-bleed { inline-size: 100svw; margin-inline: calc(50% - 50svw); max-inline-size: 100svw; }
}
@supports (width: 100dvw) {
  .full-bleed { inline-size: 100dvw; margin-inline: calc(50% - 50dvw); max-inline-size: 100dvw; }
}

/* Premium: Inversion wipe card */
.sheen-card {
  position: relative;
  border-radius: var(--radius-lg);
  border: 1px solid rgba(255,255,255,0.12);
  background: transparent;
  overflow: hidden;
  isolation: isolate;
  transition: box-shadow var(--duration-slow) var(--easing-ui), border-color var(--duration-slow) var(--easing-ui), transform var(--duration-slow) var(--easing-ui);
}
.sheen-card::before {
  /* white wipe that inverts content beneath via difference blending */
  content: '';
  position: absolute;
  inset: 0;
  /* Standard LTR inversion wipe (solid white) */
  background: #fff;
  transform: translateX(var(--wipe-x, -101%));
  transition: transform 700ms cubic-bezier(0.22, 1, 0.36, 1);
  mix-blend-mode: difference;
  z-index: 2;
  pointer-events: none;
  will-change: transform;
}
.sheen-card.fast-wipe::before { transition-duration: 520ms; }
/* focus-in drives the wipe to rest state */
.sheen-card:focus-within::before { transform: translateX(0%); }
.sheen-card:hover,
.sheen-card:focus-within {
  border-color: rgba(255,255,255,0.25);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}
.sheen-card > * { position: relative; z-index: 1; }
@media (prefers-reduced-motion) {
  .sheen-card { transition: none; }
  .sheen-card::before { transition: none; }
}

/* Grid overlay debug removed for production */

/* Page transitions and element fade-ins */
@keyframes pageFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

.page-fade { animation: pageFadeIn 700ms cubic-bezier(0.22, 1, 0.36, 1); }

/* Blob page-transition overlay */
.pt-blob-overlay {
  position: fixed;
  inset: 0;
  z-index: 100; /* .z-overlay */
  background: var(--blob-color, #ffffff);
  opacity: 1;
  /* Start as tiny circle at bottom center; JS updates --cx/--cy/--r */
  --cx: 50%;
  --cy: 90%;
  --r: 0%;
  clip-path: circle(var(--r) at var(--cx) var(--cy));
  will-change: clip-path, opacity;
  transition: clip-path 520ms var(--easing-ui), opacity var(--duration-normal) var(--easing-ui);
  contain: layout paint;
  transform: translateZ(0); /* promote */
  pointer-events: none;
}
.pt-blob-overlay[data-active="0"] { opacity: 0; }
.pt-blob-overlay[data-active="1"] { opacity: 1; }
@media (prefers-reduced-motion) {
  .pt-blob-overlay { transition: opacity 120ms linear; clip-path: none; }
}

.fade-stagger > * {
  opacity: 0;
  animation: fadeUp 1100ms cubic-bezier(0.22, 1, 0.36, 1) forwards;
}
.fade-stagger > *:nth-child(1) { animation-delay: 80ms; }
.fade-stagger > *:nth-child(2) { animation-delay: 160ms; }
.fade-stagger > *:nth-child(3) { animation-delay: 240ms; }
.fade-stagger > *:nth-child(4) { animation-delay: 320ms; }
.fade-stagger > *:nth-child(5) { animation-delay: 400ms; }
.fade-stagger > *:nth-child(6) { animation-delay: 480ms; }
.fade-stagger > *:nth-child(7) { animation-delay: 560ms; }
.fade-stagger > *:nth-child(8) { animation-delay: 640ms; }

@media (prefers-reduced-motion) {
  .page-fade, .fade-stagger > * { animation: none; filter: none; transform: none; }
}

/* In-view reveal (premium subtle motion) */
[data-reveal] { opacity: 0; transform: translateY(14px) translateZ(0); backface-visibility: hidden; will-change: opacity, transform; transition: opacity var(--duration-motion) var(--ease-motion), transform var(--duration-motion) var(--ease-motion); }
[data-reveal].is-inview { opacity: 1; transform: none; }
[data-reveal-stagger] > * { opacity: 0; transform: translateY(14px) translateZ(0); backface-visibility: hidden; will-change: opacity, transform; transition: opacity var(--duration-motion) var(--ease-motion), transform var(--duration-motion) var(--ease-motion); }
[data-reveal-stagger].is-inview > * { opacity: 1; transform: none; }
[data-reveal-stagger].is-inview > *:nth-child(1) { transition-delay: 80ms; }
[data-reveal-stagger].is-inview > *:nth-child(2) { transition-delay: 200ms; }
[data-reveal-stagger].is-inview > *:nth-child(3) { transition-delay: 320ms; }
[data-reveal-stagger].is-inview > *:nth-child(4) { transition-delay: 440ms; }
[data-reveal-stagger].is-inview > *:nth-child(5) { transition-delay: 560ms; }
[data-reveal-stagger].is-inview > *:nth-child(6) { transition-delay: 680ms; }
[data-reveal-stagger].is-inview > *:nth-child(7) { transition-delay: 800ms; }
[data-reveal-stagger].is-inview > *:nth-child(8) { transition-delay: 920ms; }
[data-reveal-stagger].is-inview > *:nth-child(9) { transition-delay: 1040ms; }
[data-reveal-stagger].is-inview > *:nth-child(10) { transition-delay: 1160ms; }
[data-reveal-stagger].is-inview > *:nth-child(11) { transition-delay: 1280ms; }
[data-reveal-stagger].is-inview > *:nth-child(12) { transition-delay: 1400ms; }
@media (prefers-reduced-motion) {
  [data-reveal], [data-reveal-stagger] > * { transition: none; transform: none; opacity: 1; }
}

/* Blur variants */
[data-reveal-blur] { opacity: 0; transform: translateY(16px) translateZ(0); filter: blur(8px); backface-visibility: hidden; will-change: opacity, transform, filter; transition: opacity var(--duration-motion) var(--ease-motion), transform var(--duration-motion) var(--ease-motion), filter var(--duration-motion) var(--ease-motion); }
[data-reveal-blur].is-inview { opacity: 1; transform: none; filter: blur(0); }
[data-reveal-blur-stagger] > * { opacity: 0; transform: translateY(16px) translateZ(0); filter: blur(8px); backface-visibility: hidden; will-change: opacity, transform, filter; transition: opacity var(--duration-motion) var(--ease-motion), transform var(--duration-motion) var(--ease-motion), filter var(--duration-motion) var(--ease-motion); }
[data-reveal-blur-stagger].is-inview > * { opacity: 1; transform: none; filter: blur(0); }
[data-reveal-blur-stagger].is-inview > *:nth-child(1) { transition-delay: 80ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(2) { transition-delay: 200ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(3) { transition-delay: 320ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(4) { transition-delay: 440ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(5) { transition-delay: 560ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(6) { transition-delay: 680ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(7) { transition-delay: 800ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(8) { transition-delay: 920ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(9) { transition-delay: 1040ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(10) { transition-delay: 1160ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(11) { transition-delay: 1280ms; }
[data-reveal-blur-stagger].is-inview > *:nth-child(12) { transition-delay: 1400ms; }
@media (prefers-reduced-motion) {
  [data-reveal-blur], [data-reveal-blur-stagger] > * { transition: none; transform: none; opacity: 1; filter: none; }
}

/* Media should never exceed their container width by default */
img, video, canvas, svg { display: block; max-width: 100%; height: auto; }

/* Utility: show only when pointer is fine (e.g., mouse); default hidden */
.show-on-pointer-fine { display: none; }
@media (pointer: fine) {
  .show-on-pointer-fine { display: inline; }
}

/* Surfaces: consistent overlays/panels/tooltips */
.surface { background: rgba(0,0,0,0.85); border: 1px solid var(--surface-border); }
.surface-opaque { background: rgba(0,0,0,1); border: 1px solid var(--surface-border); }
.surface-90 { background: rgba(0,0,0,0.90); border: 1px solid var(--surface-border); }
.surface-strong { border-color: var(--surface-border-strong); }
.radius-sm { border-radius: var(--radius-sm); }
.radius-md { border-radius: var(--radius-md); }
.radius-lg { border-radius: var(--radius-lg); }
.elevate-sm { box-shadow: var(--shadow-sm); }
.elevate { box-shadow: var(--shadow-md); }
.elevate-lg { box-shadow: var(--shadow-lg); }
@supports (backdrop-filter: blur(0)) {
  .surface--sm { backdrop-filter: blur(4px); }
  .surface--md { backdrop-filter: blur(8px); }
  .surface--lg { backdrop-filter: blur(12px); }
}

/* Listbox (custom dropdown) */
.ui-lb__button { border-radius: 6px; }
.ui-lb__button:focus-visible { outline: 2px solid #fff; outline-offset: 2px; }
.ui-lb__panel { border-radius: var(--radius-md); transform: translateY(-2px) scale(0.98); opacity: 0; transition: transform var(--duration-normal) var(--easing-ui), opacity var(--duration-normal) var(--easing-ui); }
.ui-lb__panel[data-open="1"] { transform: translateY(0) scale(1); opacity: 1; }
.ui-lb__option { font-size: 0.95rem; }

/* Scoped palette inversion for sections (e.g., blog). */
/* Inverts all colors within scope, then cancels inversion on media to keep assets natural. */
.theme-invert {
  filter: invert(1) hue-rotate(180deg);
}
.theme-invert :is(img, picture, video, canvas, svg) {
  filter: invert(1) hue-rotate(180deg);
}

/* Client logo marquee (inspired by Rise spacing; tuned for our grid) */
.marquee { position: relative; width: 100%; overflow: hidden; }
.marquee > * { max-width: 100%; }
.marquee-track {
  display: flex;
  align-items: center;
  gap: clamp(2rem, 6vw, 6rem);
  width: max-content;
  white-space: nowrap;
  animation: marquee-linear var(--marquee-duration, 36s) linear infinite;
  animation-play-state: paused;
}
.marquee-item { flex: 0 0 auto; opacity: 0.85; }
.marquee-item svg { height: 2rem; width: auto; }
.marquee-item:hover { opacity: 1; }

/* Optional faded edges for the marquee, similar to Chronicle logo strip */
.marquee--faded::before,
.marquee--faded::after {
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  width: clamp(32px, 10vw, 140px);
  pointer-events: none;
  z-index: 1;
}
.marquee--faded::before {
  left: 0;
  background: linear-gradient(90deg, var(--color-background, #000) 0%, rgba(0,0,0,0.0) 100%);
}
.marquee--faded::after {
  right: 0;
  background: linear-gradient(270deg, var(--color-background, #000) 0%, rgba(0,0,0,0.0) 100%);
}

@keyframes marquee-linear {
  from { transform: translateX(0); }
  to { transform: translateX(-50%); }
}

@media (prefers-reduced-motion) {
  .marquee-track { animation: none; }
}

/* When carousel enters view, start marquee */
[data-reveal].is-inview .marquee-track { animation-play-state: running; }

/* SVG blob overlay container */
.pt-blob-svg { position: fixed; inset: 0; z-index: 100; pointer-events: none; }
/* optional: contour warp when wipe runs (disabled in code by default) */
.pt-warp .contour-layer { transform: translateY(1.5%) scale(1.03); transition: transform var(--duration-slow) var(--easing-ui); }
@media (prefers-reduced-motion) { .pt-warp .contour-layer { transform: none; } }
.pt-blob-svg[data-active="1"] { pointer-events: auto; }
/* Lock body scrolling during page wipe */
body.pt-disable-scroll { overflow: hidden; }
/* Disable pointer events on app content during wipe */
body.pt-no-events [data-app-content] { pointer-events: none; }

/* Solid button with arrow tail (used throughout) */
.button-solid {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding-inline: 1.25rem;
  /* Rectangular geometry */
  border-radius: 6px;
  border: 1px solid var(--surface-border);
  background: rgba(255,255,255,0.1);
  color: #fff;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  transition: background-color var(--duration-slow) var(--easing-ui), color var(--duration-slow) var(--easing-ui), border-color var(--duration-slow) var(--easing-ui);
}
.button--md { height: 3rem; padding-inline: 1.4rem; line-height: 1; }
.button-solid:hover { background: #fff; color: #000; border-color: rgba(255,255,255,0.9); }
.button-solid:focus-visible { outline: 2px solid #fff; outline-offset: 2px; }

/* Arrow tail: text + arrow shift without layout jump */
.arrow-shift .btn-tail { display: inline-flex; align-items: center; gap: 0.4rem; }
.arrow-shift .btn-tail .arrow { display: inline-block; transform: translateX(0); transition: transform 420ms var(--ease-premium), opacity 420ms var(--ease-premium); opacity: 0.9; }
.arrow-shift:hover .btn-tail .arrow, .arrow-shift:focus-visible .btn-tail .arrow { transform: translateX(3px); opacity: 1; }

/* Proximity nav highlight (header/footer) */
.nav-prox {
  position: relative;
  isolation: isolate;
  /* Avoid any absolutely-positioned effects from expanding layout */
  max-width: 100%;
  overflow: hidden; /* clip proximity highlight/underline within the nav row */
}
.nav-prox .nav-prox__highlight {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 160px;
  transform: translateX(var(--nav-x, -9999px));
  pointer-events: none;
  opacity: var(--nav-opacity, 0);
  transition: opacity 300ms var(--ease-premium);
  background: radial-gradient(56px 56px at center, rgba(255,255,255,0.12), rgba(255,255,255,0.08) 60%, transparent 70%);
  filter: blur(10px);
  z-index: 0;
}
.nav-prox a { position: relative; z-index: 1; transition: color 300ms var(--ease-premium), opacity 200ms var(--ease-premium), transform 200ms var(--ease-premium); }
.nav-prox a[data-prox] { opacity: var(--prox-opacity, 0.7); transform: translateZ(0) scale(var(--prox-scale, 1)); }

/* Smooth underline slider that tracks hovered/active link */
.nav-underline {
  position: absolute;
  left: 0;
  bottom: -1px;
  height: 1px;
  width: min(var(--ul-w, 0px), 100%);
  transform: translateX(var(--ul-x, 0px));
  opacity: var(--ul-o, 0);
  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.7) 35%, rgba(255,255,255,0));
  filter: drop-shadow(0 0 4px rgba(255,255,255,0.25));
  pointer-events: none;
  transition: opacity 220ms var(--ease-premium);
  max-width: 100%;
}

/* 1px boundary lines (header bottom / footer top) following the proximity highlight */
.nav-prox::before,
.nav-prox::after {
  content: "";
  position: absolute;
  left: 0;
  width: 120px;
  height: 1px;
  transform: translateX(var(--nav-x, -9999px));
  opacity: var(--nav-opacity, 0);
  transition: opacity 300ms var(--ease-premium);
  background: linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.5) 30%, rgba(255,255,255,0.0));
  pointer-events: none;
  z-index: 0;
}
.nav-prox::before { top: -1px; }
.nav-prox::after { bottom: -1px; }
/* Show only bottom line for header nav; only top line for footer nav */
.nav-prox--header::before { display: none; }
.nav-prox--footer::after { display: none; }

/* Footer top sheen that intensifies as the pointer nears the bottom edge */
.footer-sheen {
  position: absolute;
  left: 0; right: 0; top: 0;
  height: 160px;
  pointer-events: none;
  opacity: calc(var(--footer-alpha, 0));
  transition: opacity 240ms var(--ease-premium);
  background: linear-gradient(to top, rgba(255,255,255,0.06), rgba(255,255,255,0.02) 40%, transparent 100%);
}


/* Compact filter chips (blog/category) */
.chip {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  height: 2.25rem;
  padding-inline: 0.75rem;
  border: 1px solid var(--surface-border);
  border-radius: 6px;
  background: rgba(255,255,255,0.06);
  color: #fff;
  letter-spacing: 0.06em;
  /* Single line with ellipsis when constrained */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
  transition: background-color var(--duration-normal) var(--easing-ui), border-color var(--duration-normal) var(--easing-ui), color var(--duration-normal) var(--easing-ui);
}
.chip:hover, .chip:focus-visible { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.25); }
.chip.is-active { background: #fff; color: #000; border-color: rgba(255,255,255,0.9); }

/* Footer/content unmask reveal driven by CSS variable */
.mask-reveal {
  --reveal: 0%; /* 0 -> 100 */
  -webkit-mask-image: linear-gradient(to top, black var(--reveal), transparent calc(var(--reveal) + 20%));
          mask-image: linear-gradient(to top, black var(--reveal), transparent calc(var(--reveal) + 20%));
}

@layer utilities {
  /* Stack spacing utilities (logical margin-block) */
  :root {
    --stack-xs: 0.5rem;   /* ~mt-2 */
    --stack-sm: 0.75rem;  /* ~mt-3 */
    --stack-md: 1.5rem;   /* ~mt-6 */
    --stack-lg: 2.5rem;   /* ~mt-10 */
    --stack-xl: 6rem;     /* ~mt-24 */
  }
  .mbs-xs { margin-block-start: var(--stack-xs); }
  .mbs-sm { margin-block-start: var(--stack-sm); }
  .mbs-md { margin-block-start: var(--stack-md); }
  .mbs-lg { margin-block-start: var(--stack-lg); }
  .mbs-xl { margin-block-start: var(--stack-xl); }
  .mbe-xs { margin-block-end: var(--stack-xs); }
  .mbe-sm { margin-block-end: var(--stack-sm); }
  .mbe-md { margin-block-end: var(--stack-md); }
  .mbe-lg { margin-block-end: var(--stack-lg); }
  .mbe-xl { margin-block-end: var(--stack-xl); }
  .txt-0 { font-size: clamp(var(--step-0-min)*1px, calc(var(--step-0-min)*1px + (var(--step-0-max) - var(--step-0-min)) * var(--fluid)), var(--step-0-max)*1px); line-height: 1.5; }
  .txt-2 { font-size: clamp(var(--step-2-min)*1px, calc(var(--step-2-min)*1px + (var(--step-2-max) - var(--step-2-min)) * var(--fluid)), var(--step-2-max)*1px); line-height: 1.35; }
  .txt-3 { font-size: clamp(var(--step-3-min)*1px, calc(var(--step-3-min)*1px + (var(--step-3-max) - var(--step-3-min)) * var(--fluid)), var(--step-3-max)*1px); line-height: 1.28; }
  .txt-4 { font-size: clamp(var(--step-4-min)*1px, calc(var(--step-4-min)*1px + (var(--step-4-max) - var(--step-4-min)) * var(--fluid)), var(--step-4-max)*1px); line-height: 1.2; }
  .txt-5 { font-size: clamp(var(--step-5-min)*1px, calc(var(--step-5-min)*1px + (var(--step-5-max) - var(--step-5-min)) * var(--fluid)), var(--step-5-max)*1px); line-height: 1.12; }
}

